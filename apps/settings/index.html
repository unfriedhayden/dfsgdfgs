<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Settings</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; margin:0; background:transparent;}
    h2 { margin-top:16px; }
    .settings-section { margin: 18px 24px; }
    .toggle { margin: 14px 0; display:flex; gap:13px; align-items:center; }
    .toggle input { transform:scale(1.3); }
    .wallpapers { display:flex; gap:10px; margin-top:8px;}
    .wallpapers img { width:72px; height:48px; object-fit:cover; border-radius:7px; cursor:pointer; border:2px solid transparent; }
    .wallpapers img.selected, .wallpapers img:focus { border:2px solid #0a84ff; }
    .nav { margin: 22px 24px; }
    .nav a { margin-right: 18px; color: #0a84ff; text-decoration: none; }
    .nav a:hover { text-decoration: underline; }
    .back { display: inline-block; margin-top: 18px; color: #444; cursor: pointer; }
  </style>
</head>
<body>
  <div class="settings-section">
    <h2>Settings</h2>
    <div class="nav">
      <a href="#" onclick="openApp('explorer')">File Explorer</a>
      <a href="#" onclick="openApp('about')">About</a>
    </div>
    <div class="toggle">
      <label for="darkmode">Dark Mode</label>
      <input type="checkbox" id="darkmode">
    </div>
    <h3>Wallpaper</h3>
    <div class="wallpapers">
      <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1500&q=80" tabindex="0" title="Default" onclick="changeWallpaper(this)">
      <img src="https://wallpapers.com/images/hd/windows-11-blue-flow-4k-9tlwqv1xv2q1jz5c.jpg" tabindex="0" title="Windows 11 Blue" onclick="changeWallpaper(this)">
      <img src="https://wallpapers.com/images/hd/windows-11-dark-abstract-4k-6es4v4u2n4lw9x2t.jpg" tabindex="0" title="Windows 11 Dark" onclick="changeWallpaper(this)">
    </div>
    <div class="back" onclick="closeMe()">‚Üê Back to Desktop</div>
  </div>
  <script>
    const darkmode = document.getElementById("darkmode");
    darkmode.addEventListener("change", function() {
      if (this.checked) {
        window.parent.document.body.style.backgroundColor = "#222";
        window.parent.document.body.style.filter = "invert(1) hue-rotate(180deg)";
      } else {
        window.parent.document.body.style.backgroundColor = "";
        window.parent.document.body.style.filter = "";
      }
    });
    function changeWallpaper(img) {
      document.querySelectorAll('.wallpapers img').forEach(i => i.classList.remove('selected'));
      img.classList.add('selected');
      window.parent.document.body.style.backgroundImage = `url('${img.src}')`;
      window.parent.document.body.style.backgroundColor = "";
      window.parent.document.body.style.filter = "";
      darkmode.checked = false;
    }
    function closeMe() {
      if (window.parent && window.parent.windowManager) {
        for (const win of window.parent.windowManager.windows) {
          if (win.appName === "settings") window.parent.windowManager.close(win.id);
        }
      }
    }
    function openApp(app) {
      window.parent.windowManager.openApp(app, window.parent.apps.find(a=>a.id===app));
    }
  </script>
</body>
</html>
